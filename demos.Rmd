---
title: '*jumbled* demonstrations'
output: pdf_document
author: Sasha D. Hafner
date: "`r format(Sys.time(), '%d %B, %Y')`"
---

# Overview
This document demonstrates usage of some of the function in the jumbled repo, available from [github.com/sashahafner/jumbled](github.com/sashahafner/jumbled).

# Load functions

```{r}
ff <- list.files(pattern = '\\.R$')
for(i in ff) source(i)
```

# aggregate2
A wrapper for `aggregate` that accepts multiple functions and simpler arguments.
Does not accept formula notation.

Example from `aggregate` help file:
```{r}
aggregate(breaks ~ wool + tension, data = warpbreaks, mean)
```

To include sd and n, use `aggregate2`:
```{r}
aggregate2(warpbreaks, x = 'breaks', by = c('wool', 'tension'), 
           FUN = list(mean = mean, sd = sd, n = length))
```

Accepts multiple variables (as in `aggregate`).

```{r}
aggregate2(na.omit(airquality), x = c('Ozone', 'Temp'), by = 'Month', 
	   FUN = list(mean = mean, sd = sd, n = length))
```

# aggregate3

Similar, but uses formula notation.
Example from `aggregate` help file:

```{r}
aggregate(breaks ~ wool + tension, data = warpbreaks, mean)
```

To include sd and n, use `aggregate3`:

```{r}
aggregate3(warpbreaks, breaks ~ wool + tension, 
	   FUN = list(mean = mean, sd = sd, n = length))
```

For multiple response variables, use `cbind()`.

```{r}
aggregate3(airquality, cbind(Ozone, Temp) ~ Month, 
	   FUN = list(mean = mean, sd = sd, n = length))
```

So `Ozone + Temp ~ Month` doesn't work, because `aggregate()` can't handle it propertly.
It would be nice to address this limitation in the future.

# dfcombos
Something like `expand.grid` for data frames.
Can accept vectors too, but resulting name is poor.

```{r}
d1 <- data.frame(name = letters[1:5], x = 1.1)
d2 <- data.frame(b = 1:3)
dfcombos(d1, d2)

v1 <- c(TRUE, FALSE)
dfcombos(d1, d2, v1)
```

# dfsumm
Generate a data frame summary more detailed and compact than `summary` output.

```{r}
dfsumm(attenu)
```

Compare to `summary`.

```{r}
summary(attenu)
```

# interpm
Fill in missing observations for multiple columns via interpolation.
`interpm` calls `approx`.

```{r}
args(interpm)
```


```{r}
dat <- data.frame(time = 1:30, a = rnorm(30), b = rnorm(30), c = rnorm(30))
dat[5:10, -1] <- NA
dat[20:22, 'a'] <- NA

dat

dat2 <- interpm(dat, 'time', c('a', 'b', 'c'))

dat2

plot(a ~ time, data = dat)
points(a ~ time, data = dat2, cex = 0.5, col = 'blue')
```

Now woks for data.tables too.

```{r}
dat <- data.table::as.data.table(dat)
dat2 <- interpm(dat, 'time', c('a', 'b', 'c'))
```

# logaxis
Add log axis to base R plots.

# logistic
The logistic function for transformations.

# rbindf
Like `rbind` but data frame columns do not need to match.
From monitoR package.

# rounddf
Round complete data frames.

```{r}
dat <- data.frame(a = 1:10, b = rnorm(10), c = letters[1:10])
dat

rounddf(dat)
rounddf(dat, digits = c(0, 4))
rounddf(dat, digits = c(0, 4), func = signif)
rounddf(dat, digits = c(2, 2), func = signif)
```

## `ggsave2x`
Save a ggplot2 figure in more than one format in a single call.

```{r}
library(ggplot2)
ggplot(economics, aes(date, unemploy)) +
  geom_line(colour = "red")
```

```{r, eval=FALSE}
ggsave2x('economics', width = 5, height = 5)
```

Saves png and pdf by default, add more with `type` argument.
Use `...` optional arguments for more flexibility.

